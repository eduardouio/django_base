{% load static %}
<!DOCTYPE html>
<html lang="es" class="h-full" data-theme="winter">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<title>{% block title %}Proyecto Base{% endblock %}</title>
	<!-- Tailwind (CDN dev) -->
	<script src="https://cdn.tailwindcss.com"></script>
	<script>tailwind.config={darkMode:'class',theme:{extend:{}}}</script>
	<!-- DaisyUI -->
	<link href="https://cdn.jsdelivr.net/npm/daisyui@4.12.10/dist/full.min.css" rel="stylesheet" type="text/css" />
	<!-- Line Awesome (icons8 CDN sin integrity para evitar bloqueo) -->
	<link rel="stylesheet" href="https://maxst.icons8.com/vue-static/landings/line-awesome/line-awesome/1.3.0/css/line-awesome.min.css" />

	<!-- Fuente opcional -->
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
	<style>
		body { font-family: 'Inter', ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif; }
		.dark body { color-scheme: dark; }
		/* Estilos para botones de logout en menÃºs */
		.logout-form {
			display: contents;
		}
		.logout-btn {
			background: none;
			border: none;
			cursor: pointer;
			font-size: inherit;
			font-family: inherit;
			transition: background-color 0.2s;
		}
		.logout-btn:hover {
			background-color: hsl(var(--b2));
		}
	</style>

	{% block head_extra %}{% endblock %}
</head>
<body class="min-h-full flex flex-col bg-base-100 text-base-content transition-colors {% block body_class %}{% endblock %}" {% block body_extra %}{% endblock %}>

	{% block header %}
	<!-- Barra superior con DaisyUI -->
	<header class="navbar bg-base-100 border-b border-base-300 sticky top-0 z-40">
		<div class="flex-1 px-2">
			<a href="{% url 'home' %}" class="flex items-center gap-2 font-bold text-primary">
				<i class="las la-cubes text-2xl"></i>
				<span class="hidden sm:inline">Base Template</span>
			</a>
		</div>
		<nav class="flex-none">
			<ul class="menu menu-horizontal hidden md:flex gap-2">
				<li><a href="{% url 'home' %}" class="gap-1"><i class="las la-home"></i><span>Inicio</span></a></li>
			</ul>
			<div class="dropdown dropdown-end md:hidden">
				<label tabindex="0" class="btn btn-ghost btn-square">
					<i class="las la-bars text-2xl"></i>
				</label>
				<ul tabindex="0" class="menu dropdown-content mt-3 p-2 shadow bg-base-100 rounded-box w-52 z-50">
					<li><a href="{% url 'home' %}" class="gap-1"><i class="las la-home"></i> Inicio</a></li>
					<hr class="my-1" />
					{% if user.is_authenticated %}
					<li><a href="{% url 'accounts:profile' %}" class="gap-1"><i class="las la-id-badge"></i> Perfil</a></li>
					<li>
						<form method="post" action="{% url 'accounts:logout' %}" class="logout-form">
							{% csrf_token %}
							<button type="submit" class="logout-btn w-full text-left text-error gap-1 flex items-center px-4 py-2 rounded-btn">
								<i class="las la-sign-out-alt"></i> Salir
							</button>
						</form>
					</li>
					{% else %}
					<li><a href="{% url 'accounts:login' %}" class="gap-1"><i class="las la-sign-in-alt"></i> Ingresar</a></li>
					{% endif %}
				</ul>
			</div>
			<div class="flex items-center gap-2 ml-2">
				{% if user.is_authenticated %}
					<div class="dropdown dropdown-end">
						<label tabindex="0" class="btn btn-ghost normal-case flex gap-2">
							<i class="las la-user-circle text-2xl"></i>
							<span class="hidden sm:inline max-w-[140px] truncate">{{ user.email|default:'Usuario' }}</span>
							<i class="las la-angle-down"></i>
						</label>
						<ul tabindex="0" class="menu dropdown-content mt-3 p-2 shadow bg-base-100 rounded-box w-52 z-50">
							<li><a href="{% url 'accounts:profile' %}" class="gap-2"><i class="las la-id-badge"></i> Perfil</a></li>
							<li>
								<form method="post" action="{% url 'accounts:logout' %}" class="logout-form">
									{% csrf_token %}
									<button type="submit" class="logout-btn w-full text-left text-error gap-2 flex items-center px-4 py-2 rounded-btn">
										<i class="las la-sign-out-alt"></i> Salir
									</button>
								</form>
							</li>
						</ul>
					</div>
				{% else %}
					<a href="{% url 'accounts:login' %}" class="btn btn-primary btn-sm gap-2"><i class="las la-sign-in-alt"></i> Ingresar</a>
				{% endif %}
			</div>
		</nav>
	</header>
	{% endblock header %}

	<!-- Mensajes flash -->
	{% if messages %}
		<div class="max-w-4xl mx-auto mt-4 px-4 space-y-2">
			{% for message in messages %}
				<div class="alert shadow-sm {{ message.tags|default:'info' }} flex items-center">
					<i class="las la-info-circle text-xl"></i>
					<span class="flex-1">{{ message }}</span>
					<button class="dismiss-msg btn btn-xs btn-circle btn-ghost" aria-label="Cerrar">âœ•</button>
				</div>
			{% endfor %}
		</div>
	{% endif %}

	<!-- Contenido principal -->
	<main class="flex-1 w-full mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-8">
		{% block content %}
		<div class="text-center py-20">
			<h1 class="text-4xl font-bold mb-4">Bienvenido ðŸ‘‹</h1>
			<p class="opacity-80 max-w-xl mx-auto">Usa este template como base para construir tus vistas. Extiende este archivo e inserta tu contenido dentro del bloque <code>content</code>.</p>
		</div>
		{% endblock %}
	</main>

	{% block footer %}
	<!-- Pie de pÃ¡gina -->
	<footer class="footer footer-center p-6 mt-8 bg-base-200 text-base-content/70">
		<nav class="grid grid-flow-col gap-4">
			<a class="link link-hover" href="https://www.djangoproject.com/" target="_blank" rel="noopener">Django</a>
			<a class="link link-hover" href="https://www.python.org/" target="_blank" rel="noopener">Python</a>
		</nav>
		<p class="text-sm">&copy; <span id="year"></span> Proyecto Base</p>
	</footer>
	{% endblock footer %}

	{% block scripts %}{% endblock %}
	<script>
		// AÃ±o dinÃ¡mico (solo si existe el elemento)
		const yearEl = document.getElementById('year');
		if (yearEl) { yearEl.textContent = new Date().getFullYear(); }

		// MenÃº mÃ³vil
		const btn = document.getElementById('mobileMenuBtn');
		const menu = document.getElementById('mobileMenu');
		if (btn) btn.addEventListener('click', () => menu.classList.toggle('hidden'));

		// Dismiss messages
		document.querySelectorAll('.dismiss-msg').forEach(b => b.addEventListener('click', e => {
			const box = e.target.closest('div');
			box.classList.add('opacity-0', 'scale-95');
			setTimeout(()=> box.remove(), 150);
		}));
	</script>
	<script>
  document.querySelectorAll('form input').forEach(el => {
    el.classList.add('input','input-bordered','input-md','w-full');
  });
</script>
</body>
</html>
